<!doctype html>
<html lang="zh-CN" class="fullscreen-bg">

<head>
	<title>浙江省高考志愿推荐系统</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="高考 志愿 填写 推荐">
	<meta name="description" content="高考志愿填写推荐">
	<meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">   
	
	<!-- vendor css -->
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/chartist/css/chartist-custom.css">
	<!-- main css -->
	<link rel="stylesheet" href="assets/css/main.css">
	 
	<!-- icons
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">-->
	
</head>

<body class="layout-fullwidth">
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
		<!--logo
			<div class="brand">
				<a href="index.html"><img src="assets/img/logo-dark.png" alt="Klorofil Logo" class="img-responsive logo"></a>
			</div>
		-->
			<div class="brand">
			 浙江省高考志愿推荐系统
			</div>
			<div class="container-fluid">
				 
				<div class="navbar-btn navbar-btn-right">
					<a class="btn btn-success update-pro" href="#"  title="Upgrade to Pro"  target="_blank"><i class="fa fa-rocket"></i> <span>升级到高级版</span></a>
				</div>
				<div class="navbar-btn navbar-btn-right">
					<a class="btn btn-success update-pro" href="index.jsp"  title="Upgrade to Pro"  target="_blank"><i class="fa fa-rocket"></i> <span>问卷调查</span></a>
				</div>
				<div id="navbar-menu">
					<ul class="nav navbar-nav navbar-right">
						 
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="lnr lnr-question-circle"></i> <span>帮助</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#">基本用法</a></li>
								<li><a href="#">列表说明</a></li>
								<li><a href="#">充值</a></li>
								<li><a href="#">其他</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><!--<img src="assets/img/user.png" class="img-circle" alt="Avatar">-->  <span id="userNameId"></span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#"><i class="lnr lnr-user"></i> <span>个人资料</span></a></li>
								<li><a href="#"><i class="lnr lnr-cog"></i> <span>修改密码</span></a></li>
								<li><a href="#"><i class="lnr lnr-exit"></i> <span>登出</span></a></li>
							</ul>
						</li>
					 
					</ul>
				</div>
			</div>
		</nav>
		<!-- END NAVBAR -->
		 
		<!-- MAIN -->
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<!--<h3 class="page-title"></h3>-->
					
					<!--search form-->
					<div class="row">
						<div class="col-md-12">
							<div class="panel">
								
								<div class="panel-body">
								
								<form role="form" class="form-horizontal"  name="recommdationForm"  id="recommdationFormId">
									<fieldset>
										<div class="form-group">
											<label class="col-sm-2 control-label" for="I_UserLoginName">高考总分:</label>
											<div class="col-sm-3">
												<input type="text" class="form-control" id="scoreTotalId"  disabled/>
											</div>
											<label class="col-sm-2 control-label" for="I_UserLoginName">位次号:</label>
											<div class="col-sm-3">
												<input type="text" class="form-control" id="rankId"  disabled/>
											</div>
											<div class="col-sm-2"></div> 
										</div>
										<div class="form-group">
											<label class="col-sm-2 control-label" >高校所在地*：</label>
											<div class="col-sm-8">
												<select class="form-control"  id="provinceId" name="province">
												</select>
											</div> 
											<div class="col-sm-2"></div> 
										</div>
										<div class="form-group">
											<label class="col-sm-2 control-label" >专业门类*:</label>
											<div class="col-sm-3">
												<select class="form-control"  id="majorLevelOneId" onchange="changeMajorLevelOne();" name="majorLevelOne">  
												</select>
											</div>
											<label class="col-sm-2 control-label" >专业大类:</label>
											<div class="col-sm-3">
												<select class="form-control"   id="majorLevelTwoId"  name="majorLevelTwo">
												</select>
											</div>
											<div class="col-sm-2"></div>  
										</div>
										<div class="form-group">
										   <label class="col-sm-2 control-label" for="I_UserLoginName">高校分类:</label>
											<div class="col-sm-3">
												<select class="form-control"> 
												<option selected>请选择</option>
												<option >不限</option>
												</select>
											</div>
											<label class="col-sm-2 control-label" for="I_UserLoginName">排名顺序*:</label>
											<div class="col-sm-3">
												<select class="form-control"  id="orderId"  name="order">
												</select>
											</div>
											<div class="col-sm-2"></div> 
										</div>
										<!-- 
										<div class="form-group" >
										    <label class="col-sm-2 control-label" for="I_UserType">冲：</label>
											<div class="col-sm-8">
												<select class="form-control"  name="probability1"> 
												<option selected value=-1>请选择</option>
												<option value=1>0%-5%</option>
												<option value=2>0%-10%</option>
												<option value=3>0%-20%</option>
												<option value=4>0%-30%</option>
												</select>
											</div> 
											<div class="col-sm-2"></div> 
										</div>
										<div class="form-group">
										    <label class="col-sm-2 control-label" for="I_UserType">稳：</label>
											<div class="col-sm-8">
												<select class="form-control" name="probability2"> 
												<option selected value=-1>请选择</option>
												<option value=1>30%-70%</option>
												<option value=2>40%-70%</option>
												<option value=3>50%-70%</option>
												<option value=4>60%-70%</option>
												</select>
											</div> 
											<div class="col-sm-2"></div> 
										</div>
										<div class="form-group">
										    <label class="col-sm-2 control-label" for="I_UserType">保：</label>
											<div class="col-sm-8">
												<select class="form-control" name="probability3"> 
												<option selected value=-1>请选择</option>
												<option value=1>70%-100%</option>
												<option value=2>80%-100%</option>
												<option value=3>90%-100%</option>
												</select>
											</div> 
											<div class="col-sm-2"></div> 
										</div>
		  -->
										 
										<div class="form-group">
											<div class="col-sm-2">
											</div>
											<div class="col-sm-8">
												<input type="button" class="btn btn-primary btn-block"   value="查询"   onclick="recommdation();" />
											</div>
											<div class="col-sm-2">
											</div>
										</div>
									</fieldset>
								</form>
								
								</div>
							</div>
						</div>
					</div>
					
					<!--search result-->
					<div class="row"  id="resultId"  style="display: none;">
						<div class="col-md-12">
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title"></h3>
								</div>
								<div class="panel-body">
									<table class="table table-striped">
										<thead>
											<tr>
												<th>专业代码</th>
												<th>专业名称</th>
												<th>学校代码</th>
												<th>学校名称</th>
												<th>录取概率</th>
											</tr>
										</thead>
										<tbody  id="tbodyId">
										 
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
					 
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
		<!-- END MAIN -->
		<div class="clearfix"></div>
		
	</div>
	<!-- END WRAPPER -->
 
		
	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/jquery/jsrender.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/chartist/js/chartist.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script>
	$(document).ready(function() {
		//get score info
		$.ajax({
	        type: "get",
	        url: "user/info",
	        success: function(data) {
	          if(data.success==1){
	        	  $("#scoreTotalId").val(data.data.totalScore);
	        	  $("#userNameId").html(data.data.userName);
	        	  $("#rankId").val(data.data.rank);
	          }else{
	        	 aler("请重新登录!");
	        	  window.location.href = "login.html";  
	          }
	        }
	    });
		
		//省
		$.ajax({
	        type: "get",
	        url: "common/province",
	        success: function(data) {
	          if(data.success==1){ 
	        	  var h = $.templates("#provinceTempId").render(data);
	        	  h = "<option  value=-1 selected>请选择</option>" + h;
	        	  $("#provinceId").html(h); 
	          }
	        }
	    });
		
		//专业
		$.ajax({
	        type: "get",
	        url: "common/major/level/one",
	        success: function(data) {
	          if(data.success==1){ 
	        	  var h = $.templates("#majorTempId").render(data);
	        	  h = "<option  value=-1 selected>请选择</option>" + h +"<option value=8888>大类</option><option value=9999>实验班</option>";
	        	  $("#majorLevelOneId").html(h); 
	          }
	        }
	    });
		
		//排名顺序
		$.ajax({
	        type: "get",
	        url: "common/order",
	        success: function(data) {
	          if(data.success==1){ 
	        	  var h = $.templates("#majorTempId").render(data);
	        	  h = "<option  value=-1 selected>请选择</option>" +"<option value=9999>综合</option>"+ h;
	        	  $("#orderId").html(h); 
	          }
	        }
	    });
		 
		
	});//end document ready
	
	var changeMajorLevelOne = function( ){
		var leveOne = $("#majorLevelOneId").val();
		$.ajax({
	        type: "get",
	        url: "common/major/level/two/"+leveOne,
	        success: function(data) {
	          if(data.success==1){ 
	        	  var h = $.templates("#majorTempId").render(data);
	        	  h = "<option value=-1 selected>请选择</option>" + h;
	        	  $("#majorLevelTwoId").html(h); 
	          }
	        }
	    });
	}
	
	var recommdation = function( ){
		if($("#provinceId").val()==-1){
			alert("请选择高校所在地！");
			$("#provinceId").parent().addClass("has-error");
			$("#provinceId").change(function(){
				$("#provinceId").parent().removeClass("has-error");
			});
			return false; 
		}
		
		if($("#majorLevelOneId").val()==-1){
			alert("请选择专业门类！");
			$("#majorLevelOneId").parent().addClass("has-error");
			$("#majorLevelOneId").change(function(){
				$("#majorLevelOneId").parent().removeClass("has-error");
			});
			return false; 
		}
		
		if($("#orderId").val()==-1){
			alert("请选择排名顺序！");
			$("#orderId").parent().addClass("has-error");
			$("#orderId").change(function(){
				$("#orderId").parent().removeClass("has-error");
			});
			return false; 
		}
		 
		 $.ajax({
		       url: "common/recommendation",
		       type: "post",
		       data:$("#recommdationFormId").serialize(),
		       async: true,
		       success: function (data) {  
		    	   if(data.data.length>0){
		    		   $("#resultId").css("display","");
		    		   var h = $.templates("#recommondationListTempId").render(data);
		    		   $("#tbodyId").html(h);
		    	   }else{
		    		   $("#resultId").css("display","");
		    		   $("#tbodyId").html("<tr><td cospan=4>没有推荐结果</td></tr>");
		    	   }
		       }		          
		});
		
	}// end recommondation
	</script>
	
	
	
<script id="provinceTempId" type="text/x-jsrender">
{{for data}}
<option value={{:id}}>{{:name}}</option>
{{/for}}
</script> 

<script id="majorTempId" type="text/x-jsrender">
{{for data}}
<option value={{:code}}>{{:major}}</option>
{{/for}}
</script> 

<script id="recommondationListTempId" type="text/x-jsrender">
{{for data}}
<tr>
	<td>{{:majorCode}}</td>
	<td>{{:majorDetail}}</td>
	<td>{{:school}}</td>
	<td>{{:school}}</td>
	<td>
	    <div class="progress">

			 

			{{if probability <=100 && probability>=80}}
			<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: {{:probability}}%;">
	           {{:probability}}%
	        </div>
			{{/if}}

			{{if probability>30 && probability <80}}
			<div class="progress-bar  progress-bar-warning" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: {{:probability}}%;">
	           {{:probability}}%
	        </div>
			{{/if}}

			{{if probability<=30}}
			<div class="progress-bar  progress-bar-danger" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: {{:probability}}%;">
	           {{:probability}}%
	        </div>
			{{/if}}

	    </div>
	</td>
</tr>
{{/for}}
</script> 

</body>

</html>
